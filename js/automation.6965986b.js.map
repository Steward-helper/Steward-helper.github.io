{"version":3,"sources":["webpack:///./src/mixins/install.mixin.js","webpack:///./src/views/Automation.vue?74e0","webpack:///./src/mixins/installok.mixin.js","webpack:///./src/views/Automation.vue?e04f","webpack:///./node_modules/core-js/modules/web.url.to-json.js","webpack:///./src/helpers/icon.helper.js","webpack:///./src/views/Automation.vue?de2a","webpack:///src/views/Automation.vue","webpack:///./src/views/Automation.vue?b9e9","webpack:///./src/views/Automation.vue?859d"],"names":["methods","installAutomation","automation","attrs","id","objectId","event","CustomEvent","detail","action","data","document","dispatchEvent","created","this","bindInstallEvents","addEventListener","WEB_ACTIONS","INSTALL_DONE","onInstallOk","getAutomation","aid","am","installOk","installations","then","result","count","attributes","$","target","proto","enumerable","toJSON","URL","prototype","toString","call","MyIcon","Icon","createFromIconfontCN","scriptUrl","render","_vm","_h","$createElement","_c","_self","staticClass","_v","_s","name","$t","on","$event","_e","author","username","instructions","pattern","domProps","video","introHtml","staticRenderFns","components","mixins","$route","params","loadData","mounted","component"],"mappings":"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","file":"js/automation.6965986b.js","sourcesContent":["\nexport default {\n  methods: {\n    installAutomation(automation) {\n      const attrs = {\n        ...automation,\n        id: automation.objectId\n      }\n      const event = new CustomEvent('ihelpers', {\n        detail: {\n          action: 'installAutomation',\n          data: attrs\n        }\n      });\n\n      document.dispatchEvent(event);\n    }\n  }\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=style&index=0&id=661d9c9e&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=style&index=0&id=661d9c9e&lang=scss&scoped=true&\"","import { WEB_ACTIONS } from '../constant'\nimport { installOk } from '../services/automation.service'\n\nexport default {\n  created() {\n    this.bindInstallEvents()\n  },\n\n  methods: {\n    bindInstallEvents() {\n      document.addEventListener('stewardHelper', (event) => {\n        const { action, data } = event.detail\n\n        switch (action) {\n          case WEB_ACTIONS.INSTALL_DONE:\n            this.onInstallOk(data);\n            break;\n          default:\n            break;\n        }\n      })\n    },\n\n    getAutomation() {\n      return null\n    },\n\n    onInstallOk(data) {\n      const aid = data.id\n      const am = this.getAutomation(aid)\n\n      if (am) {\n        installOk(am.installations.objectId).then(result => {\n          am.installations.count = result.attributes.count\n        })\n      }\n    },\n  }\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=style&index=1&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=style&index=1&lang=scss&\"","'use strict';\nvar $ = require('../internals/export');\n\n// `URL.prototype.toJSON` method\n// https://url.spec.whatwg.org/#dom-url-tojson\n$({ target: 'URL', proto: true, enumerable: true }, {\n  toJSON: function toJSON() {\n    return URL.prototype.toString.call(this);\n  }\n});\n","import { Icon } from 'ant-design-vue'\n\nexport const MyIcon = Icon.createFromIconfontCN({\n  scriptUrl: '//at.alicdn.com/t/font_1867097_5ewbsgfi50q.js'\n})","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"page-automation\"},[_c('div',{staticClass:\"container\"},[(_vm.automation)?_c('div',{staticClass:\"am-wrap\"},[_c('div',{staticClass:\"am-head\"},[_c('div',{staticClass:\"am-name\"},[_vm._v(_vm._s(_vm.automation.name))]),_c('div',{staticClass:\"am-data\"},[_c('div',{staticClass:\"am-ins\"},[_c('a-popconfirm',{attrs:{\"title\":_vm.$t('confirm.install', { name: _vm.automation.name})},on:{\"confirm\":function($event){return _vm.installAutomation(_vm.automation)}}},[_c('my-icon',{attrs:{\"type\":\"icon-anzhuang\"}})],1),(_vm.automation.installations)?_c('span',{staticClass:\"count\"},[_vm._v(_vm._s(_vm.automation.installations.count))]):_vm._e()],1),_c('div',{staticClass:\"author\"},[_vm._v(\" by \"),_c('router-link',{attrs:{\"to\":(\"/user/\" + (_vm.automation.author.objectId))}},[_vm._v(_vm._s(_vm.automation.author.username))])],1)])]),_c('div',{staticClass:\"am-main\"},[_c('ul',{staticClass:\"am-fields\"},[_c('li',{staticClass:\"am-field\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"Instructions:\")]),_c('code',[_vm._v(_vm._s(_vm.automation.instructions))])]),_c('li',{staticClass:\"am-field\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"Pattern:\")]),_c('code',[_vm._v(_vm._s(_vm.automation.pattern)+\" \")])]),_c('li',{staticClass:\"am-field\"},[_c('span',{staticClass:\"label\"},[_vm._v(\"Install:\")]),_c('a-popconfirm',{attrs:{\"title\":_vm.$t('confirm.install', { name: _vm.automation.name})},on:{\"confirm\":function($event){return _vm.installAutomation(_vm.automation)}}},[_c('span',{staticClass:\"btn-install\"},[_vm._v(_vm._s(_vm.$t(\"click.install\")))])])],1)]),(_vm.automation.video)?_c('div',{staticClass:\"am-video\"},[_c('h3',[_vm._v(_vm._s(_vm.$t(\"Video\")))]),_c('div',{staticClass:\"video-wrap\",domProps:{\"innerHTML\":_vm._s(_vm.automation.video)}})]):_vm._e(),_c('div',{staticClass:\"am-intro\"},[_c('h3',[_vm._v(_vm._s(_vm.$t(\"Intro\")))]),(_vm.introHtml)?_c('div',{staticClass:\"intro-view\",domProps:{\"innerHTML\":_vm._s(_vm.introHtml)}}):_c('a-empty',{attrs:{\"description\":_vm.$t('No.Intro')}})],1)])]):_vm._e()])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"page-automation\">\n    <div class=\"container\">\n      <div class=\"am-wrap\" v-if=\"automation\">\n        <div class=\"am-head\">\n          <div class=\"am-name\">{{automation.name}}</div>\n          <div class=\"am-data\">\n            <div class=\"am-ins\">\n              <a-popconfirm\n                :title=\"$t('confirm.install', { name: automation.name})\"\n                @confirm=\"installAutomation(automation)\"\n              >\n                <my-icon type=\"icon-anzhuang\" />\n              </a-popconfirm>\n\n              <span\n                class=\"count\"\n                v-if=\"automation.installations\"\n              >{{ automation.installations.count }}</span>\n            </div>\n            <div class=\"author\">\n              by\n              <router-link\n                :to=\"`/user/${automation.author.objectId}`\"\n              >{{ automation.author.username }}</router-link>\n            </div>\n          </div>\n        </div>\n        <div class=\"am-main\">\n          <ul class=\"am-fields\">\n            <li class=\"am-field\">\n              <span class=\"label\">Instructions:</span>\n              <code>{{ automation.instructions }}</code>\n            </li>\n            <li class=\"am-field\">\n              <span class=\"label\">Pattern:</span>\n              <code>{{ automation.pattern }} </code>\n            </li>\n            <li class=\"am-field\">\n              <span class=\"label\">Install:</span>\n              <a-popconfirm\n                :title=\"$t('confirm.install', { name: automation.name})\"\n                @confirm=\"installAutomation(automation)\"\n              >\n                <span class=\"btn-install\">{{$t(\"click.install\")}}</span>\n              </a-popconfirm>\n            </li>\n          </ul>\n          <div class=\"am-video\" v-if=\"automation.video\">\n            <h3>{{$t(\"Video\")}}</h3>\n            <div v-html=\"automation.video\" class=\"video-wrap\"></div>\n          </div>\n          <div class=\"am-intro\">\n            <h3>{{$t(\"Intro\")}}</h3>\n            <div class=\"intro-view\" v-if=\"introHtml\" v-html=\"introHtml\"></div>\n            <a-empty :description=\"$t('No.Intro')\" v-else/>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { automationService } from \"../services/automation.service\";\nimport { MyIcon } from \"../helpers/icon.helper\";\nimport InstallMixin from \"../mixins/install.mixin\";\nimport InstallokMixin from '../mixins/installok.mixin'\nimport { parseMarkdown } from '../helpers/marked.helper'\n\nexport default {\n  name: \"Automation\",\n\n  components: {\n    MyIcon\n  },\n\n  mixins: [InstallMixin, InstallokMixin],\n\n  data() {\n    return {\n      id: this.$route.params.id,\n      automation: null,\n      introHtml: ''\n    };\n  },\n\n  methods: {\n    loadData() {\n      automationService.item(this.id).then(automation => {\n        this.automation = automation.toJSON();\n\n        if (this.automation && this.automation.intro) {\n          this.introHtml = parseMarkdown(this.automation.intro)\n        }\n      });\n    },\n\n    getAutomation() {\n      return this.automation\n    }\n  },\n\n  mounted() {\n    this.loadData();\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../styles/scss/theme.scss\";\n\n.container {\n  width: 960px;\n  margin: 40px auto;\n  padding: 40px;\n  background: #fff;\n  border: 1px solid #ededed;\n}\n\n.am-name {\n  font-size: 20px;\n  font-weight: 500;\n}\n\n.am-data {\n  display: flex;\n  justify-content: space-between;\n  margin-top: 12px;\n  font-size: 14px;\n}\n\n.anticon {\n  cursor: pointer;\n}\n\n.am-head {\n  padding-bottom: 5px;\n  border-bottom: 1px solid #ededed;\n}\n\n.am-fields {\n  margin-top: 10px;\n  list-style: none;\n}\n\n.count {\n  margin-left: 5px;\n}\n\n.label {\n  display: inline-block;\n  margin-top: 10px;\n  margin-right: 10px;\n  font-size: 16px;\n  color: $color-deep;\n}\n\n.am-intro {\n  margin-top: 20px;\n}\n\n.intro-view {\n  padding: 10px 25px;\n  background: rgba(27,31,35,.05);\n  line-height: 1.45!important;\n}\n\ncode {\n  background: rgba(27,31,35,.05);\n  border-radius: 3px;\n  padding: 3px 5px;\n}\n\n.am-video {\n  margin-top: 20px;\n}\n\n.btn-install {\n  color: $color-primary;\n  cursor: pointer;\n}\n</style>\n<style lang=\"scss\">\n.am-video {\n  iframe {\n    width: 600px;\n    height: 337px;\n  }\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Automation.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Automation.vue?vue&type=template&id=661d9c9e&scoped=true&\"\nimport script from \"./Automation.vue?vue&type=script&lang=js&\"\nexport * from \"./Automation.vue?vue&type=script&lang=js&\"\nimport style0 from \"./Automation.vue?vue&type=style&index=0&id=661d9c9e&lang=scss&scoped=true&\"\nimport style1 from \"./Automation.vue?vue&type=style&index=1&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"661d9c9e\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}