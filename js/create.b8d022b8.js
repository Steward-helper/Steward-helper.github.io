(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["create"],{"25f0":function(t,e,r){"use strict";var n=r("6eeb"),a=r("825a"),o=r("d039"),i=r("ad6d"),s="toString",c=RegExp.prototype,l=c[s],u=o((function(){return"/a/b"!=l.call({source:"a",flags:"b"})})),f=l.name!=s;(u||f)&&n(RegExp.prototype,s,(function(){var t=a(this),e=String(t.source),r=t.flags,n=String(void 0===r&&t instanceof RegExp&&!("flags"in c)?i.call(t):r);return"/"+e+"/"+n}),{unsafe:!0})},"2ca0":function(t,e,r){"use strict";var n=r("23e7"),a=r("06cf").f,o=r("50c4"),i=r("5a34"),s=r("1d80"),c=r("ab13"),l=r("c430"),u="".startsWith,f=Math.min,d=c("startsWith"),m=!l&&!d&&!!function(){var t=a(String.prototype,"startsWith");return t&&!t.writable}();n({target:"String",proto:!0,forced:!m&&!d},{startsWith:function(t){var e=String(s(this));i(t);var r=o(f(arguments.length>1?arguments[1]:void 0,e.length)),n=String(t);return u?u.call(e,n,r):e.slice(r,r+n.length)===n}})},"3ca3":function(t,e,r){"use strict";var n=r("6547").charAt,a=r("69f3"),o=r("7dd0"),i="String Iterator",s=a.set,c=a.getterFor(i);o(String,"String",(function(t){s(this,{type:i,string:String(t),index:0})}),(function(){var t,e=c(this),r=e.string,a=e.index;return a>=r.length?{value:void 0,done:!0}:(t=n(r,a),e.index+=t.length,{value:t,done:!1})}))},"44e7":function(t,e,r){var n=r("861d"),a=r("c6b6"),o=r("b622"),i=o("match");t.exports=function(t){var e;return n(t)&&(void 0!==(e=t[i])?!!e:"RegExp"==a(t))}},"4df4":function(t,e,r){"use strict";var n=r("0366"),a=r("7b0b"),o=r("9bdd"),i=r("e95a"),s=r("50c4"),c=r("8418"),l=r("35a1");t.exports=function(t){var e,r,u,f,d,m,p=a(t),v="function"==typeof this?this:Array,g=arguments.length,h=g>1?arguments[1]:void 0,b=void 0!==h,y=l(p),w=0;if(b&&(h=n(h,g>2?arguments[2]:void 0,2)),void 0==y||v==Array&&i(y))for(e=s(p.length),r=new v(e);e>w;w++)m=b?h(p[w],w):p[w],c(r,w,m);else for(f=y.call(p),d=f.next,r=new v;!(u=d.call(f)).done;w++)m=b?o(f,h,[u.value,w],!0):u.value,c(r,w,m);return r.length=w,r}},"5a34":function(t,e,r){var n=r("44e7");t.exports=function(t){if(n(t))throw TypeError("The method doesn't accept regular expressions");return t}},a15b:function(t,e,r){"use strict";var n=r("23e7"),a=r("44ad"),o=r("fc6a"),i=r("a640"),s=[].join,c=a!=Object,l=i("join",",");n({target:"Array",proto:!0,forced:c||!l},{join:function(t){return s.call(o(this),void 0===t?",":t)}})},a630:function(t,e,r){var n=r("23e7"),a=r("4df4"),o=r("1c7e"),i=!o((function(t){Array.from(t)}));n({target:"Array",stat:!0,forced:i},{from:a})},ab13:function(t,e,r){var n=r("b622"),a=n("match");t.exports=function(t){var e=/./;try{"/./"[t](e)}catch(r){try{return e[a]=!1,"/./"[t](e)}catch(n){}}return!1}},b06a:function(t,e,r){},d28b:function(t,e,r){var n=r("746f");n("iterator")},d81d:function(t,e,r){"use strict";var n=r("23e7"),a=r("b727").map,o=r("1dde"),i=r("ae40"),s=o("map"),c=i("map");n({target:"Array",proto:!0,forced:!s||!c},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})},d879:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"page-create"},[r("div",{staticClass:"container"},[r("div",{staticClass:"form-panel"},[r("a-form-model",{ref:"form",attrs:{model:t.form,"label-col":{span:5},"wrapper-col":{span:10},rules:t.rules},on:{submit:t.handleSubmit}},[r("a-form-model-item",{attrs:{label:"Name",prop:"name"}},[r("a-input",{attrs:{placeholder:t.$t("enter.automation.name")},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1),r("a-form-model-item",{attrs:{label:"Action",prop:"type"}},[r("a-select",{attrs:{dropdownMatchSelectWidth:!1,placeholder:t.$t("choose.automation.action")},on:{change:t.onActionChange},model:{value:t.form.type,callback:function(e){t.$set(t.form,"type",e)},expression:"form.type"}},t._l(t.options.actions,(function(e){return r("a-select-option",{key:e.value,attrs:{value:e.value}},[t._v(" "+t._s(e.label)+" ")])})),1)],1),t.args.length?t._l(t.args,(function(e){return r("a-form-model-item",{key:e.name,attrs:{label:e.name}},[r("a-tooltip",[r("template",{slot:"title"},[t._v(" "+t._s(e.tips)+" ")]),"string"===e.type?r("a-input",{attrs:{placeholder:e.placeholder},model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"arg.value"}}):t._e(),"boolean"===e.type?r("a-switch",{model:{value:e.value,callback:function(r){t.$set(e,"value",r)},expression:"arg.value"}}):t._e()],2)],1)})):t._e(),r("a-form-model-item",{attrs:{label:"Target",prop:"target"}},[r("a-input",{attrs:{placeholder:t.$t("enter.automation.target.selector")},model:{value:t.form.target,callback:function(e){t.$set(t.form,"target",e)},expression:"form.target"}},[r("div",{attrs:{slot:"addonBefore"},slot:"addonBefore"},[t._v("@")])])],1),r("a-form-model-item",{attrs:{label:"Instructions","wrapper-col":{span:18}}},[r("code",{staticClass:"code"},[t._v(t._s(t.instructions))])]),r("a-form-model-item",{attrs:{label:"Pattern",prop:"pattern"}},[r("a-input",{attrs:{placeholder:t.$t("enter.automation.url.pattern")},model:{value:t.form.pattern,callback:function(e){t.$set(t.form,"pattern",e)},expression:"form.pattern"}})],1),r("a-form-model-item",{attrs:{label:"Video",prop:"video"}},[r("a-textarea",{attrs:{placeholder:t.$t("enter.automation.video"),autoSize:{minRows:2}},model:{value:t.form.video,callback:function(e){t.$set(t.form,"video",e)},expression:"form.video"}})],1),r("a-form-model-item",{attrs:{label:"Intro",prop:"intro","wrapper-col":{span:18}}},[r("a-icon",{class:{"is-active":t.inpreview},attrs:{type:"read"},on:{click:t.onPreviewClick}}),r("a-textarea",{directives:[{name:"show",rawName:"v-show",value:!t.inpreview,expression:"!inpreview"}],attrs:{placeholder:t.$t("enter.automation.intro"),autoSize:{minRows:2}},model:{value:t.form.intro,callback:function(e){t.$set(t.form,"intro",e)},expression:"form.intro"}}),t.inpreview?r("div",{staticClass:"intro-preview",domProps:{innerHTML:t._s(t.introPreview)}}):t._e()],1),r("a-form-model-item",{attrs:{"wrapper-col":{span:10,offset:5}}},[r("a-button",{attrs:{type:"primary","html-type":"submit",disabled:t.submitting}},[t._v(t._s(t.$t("create")))])],1)],2)],1)])])},a=[],o=(r("99af"),r("4de4"),r("7db0"),r("a15b"),r("d81d"),r("b0c0"),r("5530"));function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t){if(Array.isArray(t))return i(t)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("e260"),r("d3b7"),r("3ca3"),r("ddb0");function c(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}r("fb6a"),r("25f0");function l(t,e){if(t){if("string"===typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(t){return s(t)||c(t)||l(t)||u()}var d=r("267e");r("2ca0");function m(){return JSON.parse(JSON.stringify(d["a"]))}function p(){return{name:"",intro:"",pattern:"",target:"body",type:"",video:""}}function v(t){return{name:[{required:!0,message:t.$t("enter.automation.name")}],type:[{required:!0,message:t.$t("choose.automation.action")}],target:[{required:!0,message:t.$t("enter.automation.target.selector")}],pattern:[{required:!0,message:t.$t("enter.automation.url.pattern")}],video:[{validator:function(e,r,n){r?r.startsWith("<iframe")?n():n(new Error(t.$t("invalid.video"))):n()}}]}}var g=r("b1c8"),h=r("7eda"),b={name:"AutomationCreate",data:function(){return{options:{actions:d["a"]},actionConfigs:m(),form:p(),rules:v(this),args:[],inpreview:!1,submitting:!1,introPreview:""}},computed:{instructions:function(){var t=this.getFullAction(),e=this.form.target;return[t,"@",e].join("")}},methods:{getFullAction:function(){var t=this.form.type,e=this.args;if(this.args.length){var r=e.filter((function(t){return t.value!==t.defaultValue})).map((function(t){return[t.name,t.value].join("!")}));return[t].concat(f(r)).join("^")}return t},reset:function(){this.form=p(),this.actionConfigs=m(),this.args=[]},submit:function(){var t=this,e=Object.assign({},this.form);delete e.target;var r=Object(o["a"])(Object(o["a"])({},e),{},{instructions:this.instructions});this.submitting=!0,Object(g["a"])(r).then((function(){t.submitting=!1,t.$message.success(t.$t("create.ok")),t.reset()})).catch((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Something error";console.log("submit -> msg",e),t.$message.error(t.$t("create.error"))}))},handleSubmit:function(t){var e=this;t.preventDefault(),this.$refs.form.validate((function(t){t&&e.submit()}))},updateArgs:function(t){var e=this.actionConfigs.find((function(e){return e.value===t}));this.args=e&&e.args||[]},onActionChange:function(t){this.updateArgs(t)},onPreviewClick:function(){this.inpreview=!this.inpreview,this.inpreview&&(this.introPreview=Object(h["a"])(this.form.intro))}}},y=b,w=(r("ecc7"),r("2877")),S=Object(w["a"])(y,n,a,!1,null,"08445774",null);e["default"]=S.exports},e01a:function(t,e,r){"use strict";var n=r("23e7"),a=r("83ab"),o=r("da84"),i=r("5135"),s=r("861d"),c=r("9bf2").f,l=r("e893"),u=o.Symbol;if(a&&"function"==typeof u&&(!("description"in u.prototype)||void 0!==u().description)){var f={},d=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof d?new u(t):void 0===t?u():u(t);return""===t&&(f[e]=!0),e};l(d,u);var m=d.prototype=u.prototype;m.constructor=d;var p=m.toString,v="Symbol(test)"==String(u("test")),g=/^Symbol\((.*)\)[^)]+$/;c(m,"description",{configurable:!0,get:function(){var t=s(this)?this.valueOf():this,e=p.call(t);if(i(f,t))return"";var r=v?e.slice(7,-1):e.replace(g,"$1");return""===r?void 0:r}}),n({global:!0,forced:!0},{Symbol:d})}},ecc7:function(t,e,r){"use strict";var n=r("b06a"),a=r.n(n);a.a},fb6a:function(t,e,r){"use strict";var n=r("23e7"),a=r("861d"),o=r("e8b5"),i=r("23cb"),s=r("50c4"),c=r("fc6a"),l=r("8418"),u=r("b622"),f=r("1dde"),d=r("ae40"),m=f("slice"),p=d("slice",{ACCESSORS:!0,0:0,1:2}),v=u("species"),g=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!m||!p},{slice:function(t,e){var r,n,u,f=c(this),d=s(f.length),m=i(t,d),p=i(void 0===e?d:e,d);if(o(f)&&(r=f.constructor,"function"!=typeof r||r!==Array&&!o(r.prototype)?a(r)&&(r=r[v],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(f,m,p);for(n=new(void 0===r?Array:r)(h(p-m,0)),u=0;m<p;m++,u++)m in f&&l(n,u,f[m]);return n.length=u,n}})}}]);
//# sourceMappingURL=create.b8d022b8.js.map